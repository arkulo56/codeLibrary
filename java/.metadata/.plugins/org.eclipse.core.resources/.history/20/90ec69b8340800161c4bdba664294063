package action;

import java.sql.SQLException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.concurrent.CountDownLatch;
import java.util.logging.SimpleFormatter;

import dao.CourseDao;
import model.Course;

public class CourseAction {
	
	public int addCourse(Course cr) throws SQLException
	{
		//List<Course> getRes = this.get(cr);//查询冲突课程
		//int addRes = insert(cr);//插入课程数据
		
		return 0;
	}
	
	
	//查询时间排斥的课程
	
	//插入课程数据
	private int insert(Course cr) throws SQLException
	{
		CourseDao hd = new CourseDao();		
		return hd.add(cr);
	}
	
	//查询冲突课程
	private List<Course> get(Course cr) throws SQLException
	{		
		CourseDao hd = new CourseDao();	
		List<Map> wh = new ArrayList();
		//开始时间小于当前课程结束时间
		Map k = new HashMap();
		k.put("pre", "and");
		k.put("field", "startTime");
		k.put("relation", "<");
		k.put("value", "'"+cr.getEndTime()+"'");
		wh.add(k);
		//结束时间大于当前课程开始时间
		Map e = new HashMap();
		e.put("pre", "and");
		e.put("field", "endTime");
		e.put("relation", ">");
		e.put("value", "'"+cr.getStartTime()+"'");
		wh.add(e);
		//开课日期相等
		Map ed = new HashMap();
		ed.put("pre", "and");
		ed.put("field", "classDate");
		ed.put("relation", "=");
		ed.put("value", "'"+cr.getClassDate()+"'");
		wh.add(ed);
		
		return hd.get(wh);		
	}
	

}
